{"version":3,"file":"pix.js","sources":["../src/js/pix.js"],"sourcesContent":["import '../css/pix.css';\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\"; \n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\"; \n\nconst PIXABAY_API_KEY = \"53378626-1c7fc3c0eb24b69adb1804063\"; \n\n// Arayüz Elementleri\nconst searchForm = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.getElementById('loader');\n\n// SimpleLightbox'ı başlatma ve ayarları\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'title', \n    captionDelay: 250,\n});\n\n// ==========================================================\n// 2. YARDIMCI FONKSİYONLAR\n// ==========================================================\n\nfunction showToast(message, type = 'error') {\n    // iziToast kullanımı\n    iziToast[type]({\n        message: message,\n        position: 'topRight',\n        timeout: 5000,\n        backgroundColor: type === 'error' ? '#EF4040' : '#59A100',\n        titleColor: '#FFFFFF',\n        messageColor: '#FFFFFF',\n        iconColor: '#FFFFFF',\n    });\n}\n\nfunction toggleLoader(show) {\n    // Yükleyiciyi gösterme/gizleme\n    // loader elementinin CSS stillerinde başlangıçta 'display: none;' olduğundan emin olun.\n    loader.style.display = show ? 'block' : 'none';\n}\n\nfunction createGalleryMarkup(images) {\n    return images.map(image => `\n        <div class=\"photo-card\">\n            <a href=\"${image.largeImageURL}\" title=\"${image.tags}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n            </a>\n            <div class=\"info\">\n                <p class=\"info-item\"><b>Beğeni</b>${image.likes}</p>\n                <p class=\"info-item\"><b>Görüntüleme</b>${image.views}</p>\n                <p class=\"info-item\"><b>Yorum</b>${image.comments}</p>\n                <p class=\"info-item\"><b>İndirme</b>${image.downloads}</p>\n            </div>\n        </div>\n    `).join('');\n}\n\nasync function fetchImages(query) {\n    const searchParams = new URLSearchParams({\n        key: PIXABAY_API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n    });\n\n    const url = `https://pixabay.com/api/?${searchParams}`;\n\n    const response = await fetch(url);\n    if (!response.ok) {\n        throw new Error(`HTTP Hata! Durum: ${response.status}`);\n    }\n    const data = await response.json();\n    return data.hits; \n}\n\n\n// ==========================================================\n// 3. ANA İŞLEV (Arama ve Güncelleme)\n// ==========================================================\n\nasync function onSearch(event) {\n    event.preventDefault(); \n    \n    const form = event.currentTarget;\n    const query = form.elements.searchQuery.value.trim();\n\n    if (query === \"\") {\n        gallery.innerHTML = ''; \n        showToast('Lütfen bir arama terimi girin.', 'warning');\n        return;\n    }\n\n    // 1. Galeri içeriğini temizle\n    gallery.innerHTML = ''; \n    // 2. Yükleyiciyi göster (HTTP isteği başlamadan hemen önce)\n    toggleLoader(true);\n\n    // Promise zinciri then() ve catch() yöntemleriyle hataları işler\n    fetchImages(query)\n        .then(images => {\n            if (images.length === 0) {\n                // Sonuç yoksa iziToast ile mesaj göster\n                showToast('Sorry, there are no images matching your search query. Please try again!');\n            } else {\n                // Görselleri tek işlemle DOM'a ekle\n                const markup = createGalleryMarkup(images);\n                gallery.innerHTML = markup;\n                \n                // SimpleLightbox'ı yenile\n                lightbox.refresh();\n            }\n        })\n        .catch(error => {\n            // Hata durumunda konsola logla ve iziToast göster\n            console.error('API isteği sırasında hata:', error);\n            showToast('Görsel arama sırasında beklenmeyen bir hata oluştu.', 'error');\n        })\n        .finally(() => {\n            // Yükleyiciyi gizle (İstek tamamlandıktan sonra kaybolmalıdır)\n            toggleLoader(false);\n            form.reset(); \n        });\n}\n\nsearchForm.addEventListener('submit', onSearch);"],"names":["PIXABAY_API_KEY","searchForm","gallery","loader","lightbox","SimpleLightbox","showToast","message","type","iziToast","toggleLoader","show","createGalleryMarkup","images","image","fetchImages","query","url","response","onSearch","event","form","markup","error"],"mappings":"2GAQA,MAAMA,EAAkB,qCAGlBC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,eAAe,QAAQ,EAGzCC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,QACd,aAAc,GAClB,CAAC,EAMD,SAASC,EAAUC,EAASC,EAAO,QAAS,CAExCC,EAASD,CAAI,EAAE,CACX,QAASD,EACT,SAAU,WACV,QAAS,IACT,gBAAiBC,IAAS,QAAU,UAAY,UAChD,WAAY,UACZ,aAAc,UACd,UAAW,SACnB,CAAK,CACL,CAEA,SAASE,EAAaC,EAAM,CAGxBR,EAAO,MAAM,QAAUQ,EAAO,QAAU,MAC5C,CAEA,SAASC,EAAoBC,EAAQ,CACjC,OAAOA,EAAO,IAAIC,GAAS;AAAA;AAAA,uBAERA,EAAM,aAAa,YAAYA,EAAM,IAAI;AAAA,4BACpCA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,oDAGdA,EAAM,KAAK;AAAA,yDACNA,EAAM,KAAK;AAAA,mDACjBA,EAAM,QAAQ;AAAA,qDACZA,EAAM,SAAS;AAAA;AAAA;AAAA,KAG/D,EAAE,KAAK,EAAE,CACd,CAEA,eAAeC,EAAYC,EAAO,CAS9B,MAAMC,EAAM,4BARS,IAAI,gBAAgB,CACrC,IAAKjB,EACL,EAAGgB,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MACpB,CAAK,CAEmD,GAE9CE,EAAW,MAAM,MAAMD,CAAG,EAChC,GAAI,CAACC,EAAS,GACV,MAAM,IAAI,MAAM,qBAAqBA,EAAS,MAAM,EAAE,EAG1D,OADa,MAAMA,EAAS,QAChB,IAChB,CAOA,eAAeC,EAASC,EAAO,CAC3BA,EAAM,eAAc,EAEpB,MAAMC,EAAOD,EAAM,cACbJ,EAAQK,EAAK,SAAS,YAAY,MAAM,OAE9C,GAAIL,IAAU,GAAI,CACdd,EAAQ,UAAY,GACpBI,EAAU,iCAAkC,SAAS,EACrD,MACH,CAGDJ,EAAQ,UAAY,GAEpBQ,EAAa,EAAI,EAGjBK,EAAYC,CAAK,EACZ,KAAKH,GAAU,CACZ,GAAIA,EAAO,SAAW,EAElBP,EAAU,0EAA0E,MACjF,CAEH,MAAMgB,EAASV,EAAoBC,CAAM,EACzCX,EAAQ,UAAYoB,EAGpBlB,EAAS,QAAO,CACnB,CACb,CAAS,EACA,MAAMmB,GAAS,CAEZ,QAAQ,MAAM,6BAA8BA,CAAK,EACjDjB,EAAU,sDAAuD,OAAO,CACpF,CAAS,EACA,QAAQ,IAAM,CAEXI,EAAa,EAAK,EAClBW,EAAK,MAAK,CACtB,CAAS,CACT,CAEApB,EAAW,iBAAiB,SAAUkB,CAAQ"}